\documentclass[12pt]{article}
\usepackage[utf8]{inputenc}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{hyperref}
%\graphicspath{{figures/}}
%\usepackage{color}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{document}
\title{Metamodels and displacements  inversion \\ Notes for the R demo}
\author{Rodolphe Le Riche, Nicolas Durrande and Val√©rie Cayol}
%\date{15 february 2017}
\maketitle

\section{Overview}
This directory contains demo files for identifying a spherical reservoir from surface displacements. The programming language is R. 
Some data files are provided that describe the digital terrain model and the targetted surface displacements.

The identification is performed by optimization where a distance between data (either synthetic or measured) 
and simulation results is minimized on \emph{optimization variables}. 

The optimization problem is tackled with the EGO algorithm \cite{Jones1998}. 
The generic files for the Gaussian processes and their identification can be found in the \texttt{../labSessions/} directory.
The spherical magma chamber is described by its position (variables $xs$, $ys$ and $zs$), its radius (variable $a$) and 
its overpressure ($p$), for a total of 5 optimization variables.

\section{Prerequisites}
\begin{enumerate}
\item Have R available on your computer, cf. \url{https://www.r-project.org/}
\item Optionally (but really helpful) have rstudio installed, cf. \url{https://www.rstudio.com}
\item Install the \texttt{lhs} package (either from Tools / Install Package in rstudio or with the command \texttt{install.packages("lhs")}.
\item Optional: if you want to load the data that are in matlab format (\texttt{file\_name.mat}), 
install the ``R.matlab'' package (either from Tools / Install Package in rstudio or with the command \texttt{install.packages("R.matlab")}. But you can also load directly the ascii csv file (\texttt{file\_name.csv}) from R
\end{enumerate}

\section{Running the demo step by step}
\begin{enumerate}
\item[0.] Open with rstudio the file \texttt{mainInversionPunctualDisplSource.R}, or open the file with any text editor and start R in a console. 
We will then proceed in steps, where each step is announced by a line of comments (\verb=#### step #####... =), and go from top to bottom. 
During each step, select sections of code with the mouse and \emph{execute} them, either (rstudio) by hitting \texttt{ctrl + return} 
or, (other text editors) by cutting and pasting in the R console. The main steps are as follows.
\item Execute \texttt{load utilities}, \texttt{input for variables identification} (where the bounds on the variables are set) and \texttt{load data}.  
\end{enumerate}

\section{Files list}
\begin{itemize}
\item Generic files for building Gaussian Processes and optimizing with them are found in the \texttt{../labSessions/} directory. This directory
contains the complementary demo files for identifying a spherical reservoir from surface displacements.
\item \texttt{mogi\_3D.R}~: calculate displacements on a digital terrain model from a point-wise spherical source.
\item \texttt{plots\_3d\_full\_grid.R}~: Load a csv file (full grid), and plots its 3d data.
\item \texttt{process\_3d\_full\_grid\_from\_matlab.R}~: Load a matlab file (full grid), processes it so that it is plotted and (commented out but working) saved in csv format. Displacements are calculated with \texttt{mogi\_3D.R}.
\item data files ending in \texttt{.mat} (matlab format) or \texttt{.csv} (csv format).
\end{itemize}

% BibTeX users please use one of
%\bibliographystyle{spbasic}      % basic style, author-year citations
%\bibliographystyle{spmpsci}      % mathematics and physical sciences
%\bibliographystyle{spphys}       % APS-like style for physics
\bibliographystyle{unsrt}
\bibliography{biblio_paper}   % name your BibTeX data base


\end{document}
